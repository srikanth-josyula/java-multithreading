package org.sample.scripts;

import org.json.JSONObject;
import org.sample.http.OKHttpClient;

import com.jayway.jsonpath.JsonPath;

public class AlfrescoQueryOps {

	public int getmaxNodeCountOkHTTP(String queryString) {
		int totalDocCount = 0;
		try {

			JSONObject query = new JSONObject();
			query.put("language", "afts");
			query.put("query", queryString);

			JSONObject paging = new JSONObject();
			paging.put("maxItems", 1);

			JSONObject root = new JSONObject();
			root.put("query", query);
			root.put("paging", paging);

			String jsonString = root.toString();
			
			//System.out.println(jsonString);
			//System.out.println(CommonConstants.alf_host + CommonConstants.SEARCH_URL);

			String response = OKHttpClient.sendPOSTSync("http://locahost:8080" + "/alfresco/api/-default-/public/search/versions/1/search",
					jsonString);
			totalDocCount = JsonPath.read(response, "$.list.pagination.totalItems");

		} catch (Exception e) {
			e.printStackTrace();
		}
		return totalDocCount;
	}
}
